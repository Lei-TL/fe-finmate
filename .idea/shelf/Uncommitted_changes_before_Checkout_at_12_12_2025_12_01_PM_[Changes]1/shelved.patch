Index: app/src/main/java/com/finmate/ui/home/HomeActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.finmate.ui.home;\r\n\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.widget.ImageView;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.finmate.R;\r\nimport com.finmate.ui.activities.AddTransactionActivity;\r\nimport com.finmate.ui.activities.AddWalletActivity;\r\nimport com.finmate.ui.activities.SettingsActivity;\r\nimport com.finmate.ui.activities.StatisticActivity;\r\nimport com.finmate.ui.transaction.TransactionUIModel;\r\nimport com.finmate.ui.transaction.TransactionAdapter;\r\nimport com.finmate.data.local.database.entity.TransactionEntity;\r\nimport com.github.mikephil.charting.charts.LineChart;\r\nimport com.github.mikephil.charting.data.Entry;\r\nimport com.github.mikephil.charting.data.LineData;\r\nimport com.github.mikephil.charting.data.LineDataSet;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport dagger.hilt.android.AndroidEntryPoint;\r\n\r\n@AndroidEntryPoint\r\npublic class HomeActivity extends AppCompatActivity {\r\n\r\n    private HomeViewModel viewModel;\r\n\r\n    private LineChart lineChart;\r\n    private BottomNavigationView bottomNavigation;\r\n    private RecyclerView rvTransactions;\r\n    private TransactionAdapter transactionAdapter;\r\n    private ImageView btnMenuMore;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_home);\r\n\r\n        viewModel = new ViewModelProvider(this).get(HomeViewModel.class);\r\n\r\n        mapViews();\r\n        setupMenuMore();\r\n        setupRecyclerView();\r\n        setupBottomNavigation();\r\n        \r\n        observeViewModel();\r\n        viewModel.loadHomeData(); // Load initial data\r\n    }\r\n\r\n    private void mapViews() {\r\n        lineChart = findViewById(R.id.lineChart);\r\n        bottomNavigation = findViewById(R.id.bottomNavigation);\r\n        rvTransactions = findViewById(R.id.rvTransactions);\r\n        btnMenuMore = findViewById(R.id.btnMenuMore);\r\n\r\n        bottomNavigation.setSelectedItemId(R.id.nav_home);\r\n    }\r\n\r\n    private void observeViewModel() {\r\n        viewModel.transactions.observe(this, this::updateTransactionList);\r\n        viewModel.wallets.observe(this, wallets -> {\r\n            // Update wallet selector UI if needed\r\n        });\r\n        // Observe chart data later\r\n    }\r\n\r\n    private void updateTransactionList(List<TransactionEntity> transactionEntities) {\r\n        if (transactionEntities == null) return;\r\n\r\n        List<TransactionUIModel> uiModels = new ArrayList<>();\r\n        for (TransactionEntity entity : transactionEntities) {\r\n            uiModels.add(new TransactionUIModel(\r\n                    entity.name,\r\n                    entity.category,\r\n                    entity.amount,\r\n                    entity.wallet,\r\n                    entity.date\r\n            ));\r\n        }\r\n\r\n        transactionAdapter.updateList(uiModels); \r\n    }\r\n\r\n    private void setupMenuMore() {\r\n        btnMenuMore.setOnClickListener(v -> {\r\n            PopupMenu popup = new PopupMenu(HomeActivity.this, btnMenuMore);\r\n            popup.getMenuInflater().inflate(R.menu.menu_wallet_options, popup.getMenu());\r\n\r\n            popup.setOnMenuItemClickListener(item -> {\r\n                int id = item.getItemId();\r\n                if (id == R.id.action_choose_wallet) {\r\n                    openChooseWalletDialog();\r\n                    return true;\r\n                }\r\n                if (id == R.id.action_add_wallet) {\r\n                    startActivity(new Intent(HomeActivity.this, AddWalletActivity.class));\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            popup.show();\r\n        });\r\n    }\r\n\r\n    private void openChooseWalletDialog() {\r\n        viewModel.wallets.observe(this, wallets -> {\r\n            if (wallets == null || wallets.isEmpty()) return;\r\n\r\n            String[] walletNames = new String[wallets.size()];\r\n            for (int i = 0; i < wallets.size(); i++) {\r\n                walletNames[i] = wallets.get(i).name;\r\n            }\r\n\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n            builder.setTitle(\"Chọn ví\");\r\n            builder.setItems(walletNames, (dialog, which) -> {\r\n                String selectedWalletId = String.valueOf(wallets.get(which).id);\r\n                viewModel.selectWallet(selectedWalletId);\r\n                Toast.makeText(this, \"Đã chọn: \" + walletNames[which], Toast.LENGTH_SHORT).show();\r\n            });\r\n            builder.show();\r\n        });\r\n    }\r\n\r\n    private void setupRecyclerView() {\r\n        rvTransactions.setLayoutManager(new LinearLayoutManager(this));\r\n        transactionAdapter = new TransactionAdapter(new ArrayList<>()); \r\n        rvTransactions.setAdapter(transactionAdapter);\r\n    }\r\n\r\n    private void setupChart(List<TransactionEntity> transactions) {\r\n        // This should be derived from the transaction list\r\n        ArrayList<Entry> income = new ArrayList<>();\r\n        ArrayList<Entry> expense = new ArrayList<>();\r\n\r\n        income.add(new Entry(1, 60));\r\n        expense.add(new Entry(1, 20));\r\n\r\n        LineDataSet incomeSet = new LineDataSet(income, \"Thu nhập\");\r\n        incomeSet.setColor(Color.GREEN);\r\n\r\n        LineDataSet expenseSet = new LineDataSet(expense, \"Chi tiêu\");\r\n        expenseSet.setColor(Color.RED);\r\n\r\n        LineData data = new LineData(incomeSet, expenseSet);\r\n        lineChart.setData(data);\r\n        lineChart.invalidate(); // Refresh chart\r\n    }\r\n\r\n    private void setupBottomNavigation() {\r\n        bottomNavigation.setOnNavigationItemSelectedListener(item -> {\r\n            Intent intent = null;\r\n            int id = item.getItemId();\r\n\r\n            if (id == R.id.nav_home) return true;\r\n            if (id == R.id.nav_wallet) intent = new Intent(this, WalletActivity.class);\r\n            if (id == R.id.nav_add) intent = new Intent(this, AddTransactionActivity.class);\r\n            if (id == R.id.nav_statistic) intent = new Intent(this, StatisticActivity.class);\r\n            if (id == R.id.nav_settings) intent = new Intent(this, SettingsActivity.class);\r\n\r\n            if (intent != null) startActivity(intent);\r\n            return true;\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/finmate/ui/home/HomeActivity.java b/app/src/main/java/com/finmate/ui/home/HomeActivity.java
--- a/app/src/main/java/com/finmate/ui/home/HomeActivity.java	(revision 2f3ddfd55a132a4aa7d013710661550a8d365bce)
+++ b/app/src/main/java/com/finmate/ui/home/HomeActivity.java	(date 1765515690789)
@@ -9,18 +9,22 @@
 
 import androidx.appcompat.app.AlertDialog;
 import androidx.appcompat.app.AppCompatActivity;
+import androidx.lifecycle.Observer;
 import androidx.lifecycle.ViewModelProvider;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
 
 import com.finmate.R;
+import com.finmate.core.sync.TransactionSyncManager;
+import com.finmate.data.local.database.entity.CategoryEntity;
+import com.finmate.data.local.database.entity.TransactionEntity;
+import com.finmate.data.repository.CategoryRepository;
 import com.finmate.ui.activities.AddTransactionActivity;
 import com.finmate.ui.activities.AddWalletActivity;
 import com.finmate.ui.activities.SettingsActivity;
 import com.finmate.ui.activities.StatisticActivity;
 import com.finmate.ui.transaction.TransactionUIModel;
 import com.finmate.ui.transaction.TransactionAdapter;
-import com.finmate.data.local.database.entity.TransactionEntity;
 import com.github.mikephil.charting.charts.LineChart;
 import com.github.mikephil.charting.data.Entry;
 import com.github.mikephil.charting.data.LineData;
@@ -28,13 +32,23 @@
 import com.google.android.material.bottomnavigation.BottomNavigationView;
 
 import java.util.ArrayList;
+import java.util.HashMap;
 import java.util.List;
+import java.util.Map;
+
+import javax.inject.Inject;
 
 import dagger.hilt.android.AndroidEntryPoint;
 
 @AndroidEntryPoint
 public class HomeActivity extends AppCompatActivity {
 
+    @Inject
+    CategoryRepository categoryRepository;
+    
+    @Inject
+    TransactionSyncManager transactionSyncManager;
+
     private HomeViewModel viewModel;
 
     private LineChart lineChart;
@@ -42,6 +56,9 @@
     private RecyclerView rvTransactions;
     private TransactionAdapter transactionAdapter;
     private ImageView btnMenuMore;
+    
+    // ✅ Observer cho categories - cần remove khi destroy
+    private Observer<List<CategoryEntity>> categoriesObserver;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -56,7 +73,13 @@
         setupBottomNavigation();
         
         observeViewModel();
+        loadCategories(); // ✅ Load categories để lấy icon
         viewModel.loadHomeData(); // Load initial data
+        
+        // ✅ Bắt đầu auto-sync pending transactions
+        if (transactionSyncManager != null) {
+            transactionSyncManager.startAutoSync();
+        }
     }
 
     private void mapViews() {
@@ -79,18 +102,11 @@
     private void updateTransactionList(List<TransactionEntity> transactionEntities) {
         if (transactionEntities == null) return;
 
-        List<TransactionUIModel> uiModels = new ArrayList<>();
-        for (TransactionEntity entity : transactionEntities) {
-            uiModels.add(new TransactionUIModel(
-                    entity.name,
-                    entity.category,
-                    entity.amount,
-                    entity.wallet,
-                    entity.date
-            ));
-        }
+        // ✅ Group transactions by date và convert to TransactionGroupedItem
+        List<com.finmate.ui.transaction.TransactionGroupedItem> groupedItems = 
+            com.finmate.ui.transaction.TransactionGroupedItem.groupByDate(transactionEntities);
 
-        transactionAdapter.updateList(uiModels); 
+        transactionAdapter.updateList(groupedItems);
     }
 
     private void setupMenuMore() {
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"VcsDirectoryMappings\">\r\n    <mapping directory=\"\" vcs=\"Git\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
--- a/.idea/vcs.xml	(revision 2f3ddfd55a132a4aa7d013710661550a8d365bce)
+++ b/.idea/vcs.xml	(date 1765515665768)
@@ -2,5 +2,6 @@
 <project version="4">
   <component name="VcsDirectoryMappings">
     <mapping directory="" vcs="Git" />
+    <mapping directory="$PROJECT_DIR$" vcs="Git" />
   </component>
 </project>
\ No newline at end of file
